<div class="card bg-base-100 border border-base-300 <%= 'ring-2 ring-error' if selected? %>">
  <div class="card-body p-2">
    <%# 商品情報 %>
    <div class="flex items-center justify-between gap-4">
      <span class="font-bold truncate flex-1"><%= catalog_name %></span>
      <div class="text-right shrink-0">
        <span class="font-bold text-lg"><%= formatted_total_line_total %></span>
        <span class="text-xs text-base-content/60 ml-2"><%= t(".total_quantity", count: total_quantity) %></span>
      </div>
    </div>

    <%# 返品数入力 %>
    <div class="flex items-center justify-center gap-2 mt-1 pt-1 border-t border-base-200" data-controller="quantity-stepper">
      <span class="text-sm text-base-content/70 mr-2"><%= t(".refund") %></span>
      <button type="button"
              class="btn btn-circle btn-outline btn-sm"
              aria-label="<%= t('.decrement') %>"
              data-action="quantity-stepper#decrement">
        <%= helpers.icon "minus", extra_class: "h-4 w-4" %>
      </button>

      <%= number_field_tag quantity_field_name, refund_quantity,
                           id: quantity_field_id,
                           min: 0,
                           max: total_quantity,
                           step: 1,
                           class: "input input-bordered input-sm w-14 text-center font-bold",
                           data: {
                             quantity_stepper_target: "input",
                             action: "change->refund-cart#toggle"
                           } %>

      <button type="button"
              class="btn btn-circle btn-outline btn-sm"
              aria-label="<%= t('.increment') %>"
              data-action="quantity-stepper#increment">
        <%= helpers.icon "plus", extra_class: "h-4 w-4" %>
      </button>

      <span class="text-sm"><%= t(".unit") %></span>
    </div>
  </div>
</div>
