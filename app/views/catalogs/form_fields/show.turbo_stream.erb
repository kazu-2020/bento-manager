<%# カテゴリ選択セクションを削除 %>
<%= turbo_stream.remove Catalogs::NewForm::Component::CATEGORY_SELECTOR_SECTION_ID %>

<%= turbo_stream.update Catalogs::NewForm::Component::FORM_FIELDS_FRAME_ID do %>
  <% if @category == "bento" %>
    <%= component "catalogs/bento_fields" %>
  <% elsif @category == "side_menu" %>
    <%= component "catalogs/side_menu_fields" %>
  <% end %>
<% end %>

<%# 隠しフィールドを更新 %>
<%= turbo_stream.update Catalogs::NewForm::Component::CATEGORY_HIDDEN_ID do %>
  <input type="hidden" name="catalog[category]" value="<%= @category %>" data-category-selector-target="hiddenInput">
<% end %>

<%# アクションボタンを更新（送信ボタンを追加） %>
<%= turbo_stream.update Catalogs::NewForm::Component::MODAL_ACTIONS_ID do %>
  <button type="button" onclick="this.closest('dialog').close()" class="btn btn-ghost"><%= t("helpers.link.cancel") %></button>
  <button type="submit" form="<%= Catalogs::NewForm::Component::FORM_ID %>" class="btn btn-neutral"><%= t("catalogs.new.submit") %></button>
<% end %>
