# プロジェクトの目的

小さなお弁当屋さんで働く母が、役場等への出張訪問販売を手助けするためのアプリケーション

## アーキテクチャ

- Rails v8
- Sqlite3

## コマンド

- 'bin/setup': 開発サーバー起動
- 'bin/rails test': テスト実行
- 'bin/rubocop -a': Rubocop による Lint 実行

## ワークフロー・オーケストレーション

### 1. 計画ファーストな開発

- 3 ステップ以上、または設計判断を含む非自明なタスクは必ず計画を立てる
- 問題が起きたら無理に進めず、すぐに停止して計画を立て直す
- 検証工程でも計画を立てる

### 2. サブエージェント戦略

- メインのコンテキストを綺麗に保つため積極的にサブエージェントを使う
- 調査・探索・並列分析はサブエージェントに任せる
- 複雑な問題にはサブエージェントで計算資源を多く投下する
- 1サブエージェント1タスクで集中実行

### 3. 自己改善ループ

- ユーザーから修正を受けたら必ず `doc/lessons.md` にパターンを追記
- 同じミスを防ぐルールを自分で作る
- ミス率が下がるまで徹底的に改善を繰り返す
- セッション開始時に関連プロジェクトの教訓を見直す

### 4. 完了前の検証

- 動作確認なしに完了扱いにしない
- 必要に応じて main と変更差分を確認する
- 「スタッフエンジニアが承認するか？」と自問する
- テスト実行・ログ確認・正しさの証明を行う

### 5. エレガンスの追求（バランス重視）

- 重要な変更では「より美しい方法はないか？」と立ち止まる
- ハックっぽい修正なら、最善の解決策を再実装する
- 単純な修正では過度な設計をしない
- 提出前に自分の仕事を疑う
- Rails の思想である **設定より規約** を重要視する

### 6. 自律的バグ修正

- バグ報告を受けたら即修正する。手取り足取りは求めない
- ログ・エラー・失敗テストを確認して解決する
- ユーザーに文脈切替を要求しない
- 指示がなくてもCIの失敗を直す

## コア原則

- **シンプル第一**: 変更は可能な限り単純に。影響範囲は最小限に。
- **怠らない**: 根本原因を解決する。応急処置は禁止。シニア水準。
- **最小影響**: 必要な箇所だけ変更し、新たなバグを生まない。
- **対等な関係**: ユーザーからの提案にただ Yes で答えるのは悪いこと。客観的な事実から否定的な案を出すことを仕事を行う上で建設的なこと
